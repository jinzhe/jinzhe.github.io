webpackJsonp([1],[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=i(13),r=n(o),s=r["default"].extend(i(41));new s({el:"#app"})},function(t,e){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var n=i(27),o=i(22);t.exports=function(t){return n(o(t))}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports=!i(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(2),o="__core-js_shared__",r=n[o]||(n[o]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(10)("wks"),o=i(11),r=i(2).Symbol;t.exports=function(t){return n[t]||(n[t]=r&&r[t]||(r||o)("Symbol."+t))}},,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(42),r=n(o);e["default"]={components:{upload:r["default"]},data:function(){return{upload:{server:"",api:"",params:{token:"test"},file:"",preview:!0,crop:!0,width:300,height:300,cancel:"取消",ok:"裁剪",success:function(t){alert(t.length)}}}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(17),r=n(o);e["default"]={props:{server:{type:String,require:!0},api:{type:String,require:!0},params:{type:Object,"default":function(){return{}}},filename:{type:String,"default":"file"},file:{type:String,"default":"",twoWay:!0},ext:{type:String,"default":"jpg,gif,png"},header:{type:Object,"default":function(){return{}}},limit:{type:Number,"default":67108864},multiple:{type:Boolean,"default":!0},preview:{type:Boolean,"default":!0},auto:{type:Boolean,"default":!0},crop:{type:Boolean,"default":!1},width:{type:Number,"default":200},height:{type:Number,"default":200},ok:{type:String,"default":"OK"},cancel:{type:String,"default":"Cancel"},quality:{type:Number,"default":.8},container:{type:String,"default":""},success:{type:Function}},data:function(){return{isMobile:/(iphone|ios|android|iPad)/i.test(navigator.userAgent),percent:0,files:[],accepts:"",mimes:{jpg:"image/jpeg",png:"image/png",gif:"image/gif",mp4:"video/mp4",mov:"video/quicktime",wmv:"video/x-ms-wmv",flv:"video/x-flv",svg:"image/svg+xml",psd:"image/photoshop",mp3:"audio/mpeg",rar:"application/x-rar-compressed",zip:"application/zip",json:"application/json",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",doc:"application/msword",pdf:"application/pdf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint"},scrollbar:null,input:null,cropHeight:0,cropTop:0,showCrop:!1,showCropDialog:!1,scale:100,scaleX:0,scaleY:0,scaleLength:0,scaleWidth:0,scaleHeight:0,drag:!1,grabbing:!1,beginX:0,beginY:0,beginLength:0,img:null,canvas:null,context:null}},watch:{percent:function(){var t=this;100==this.percent&&setTimeout(function(){t.percent=0},500)},auto:function(){this.auto&&(this.uploadFiles(),this.auto=!1)}},ready:function(){this.crop&&(this.multiple=!1,this.ext="jpg",this.auto=!1);for(var t=[],e=this.ext.split(","),i=0;i<e.length;i++)t.push(this.mimes[e[i]]);this.accepts=t.join(",")},methods:{fileChange:function(t){var e=this;if(this.input=t.target,this.crop){var i=function(){if(0==t.target.files.length)return{v:!1};e.showCrop=!0,e.showCropDialog=!1;var i=new FileReader;i.onload=function(t){e.img=new Image,e.img.src=i.result,e.img.onload=function(){""==e.container?"hidden"==window.getComputedStyle(document.body).overflow?e.scrollbar=document.querySelector(".router"):e.scrollbar=document.body:e.scrollbar=document.querySelector(e.container);var t=e.scrollbar.scrollHeight,n=window.innerHeight;t<=n?(e.cropHeight=n,e.cropTop=~~(n-(e.height+50))/2):(e.cropHeight=t,e.cropTop=~~((n-(e.height+50))/2)),e.img.naturalWidth>e.img.naturalHeight?(e.scaleHeight=e.height,e.scaleWidth=Math.round(e.scaleHeight*e.img.naturalWidth/e.img.naturalHeight)):(e.scaleWidth=e.width,e.scaleHeight=Math.round(e.scaleWidth*e.img.naturalHeight/e.img.naturalWidth)),e.scaleX=-Math.round((e.scaleWidth-e.width)/2),e.scaleY=-Math.round((e.scaleHeight-e.height)/2),e.cropImage=i.result,e.canvas=document.createElement("canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.canvas.setAttribute("style","position:absolute;left:0;top:0;opacity:0;z-index:99999"),e.context=e.canvas.getContext("2d"),e.cropToCanvas(),document.body.appendChild(e.canvas),e.showCropDialog=!0}},i.readAsDataURL(t.target.files[0])}();if("object"===("undefined"==typeof i?"undefined":(0,r["default"])(i)))return i.v}else this.files=[],this.getFiles(t),this.auto&&this.uploadFiles()},getFiles:function(t){var e=this;t.stopPropagation(),t.preventDefault(),this.files=t.target.files||t.dataTransfer.files;var i=this.ext.split(","),n=[];i.length>0&&i.forEach(function(t){void 0!=e.mimes[t]&&n.push(e.mimes[t])});for(var o,r=0;o=this.files[r];r++)(o.size>this.limit||!n.includes(o.type))&&this.removeFile(o.name)},removeFile:function(t){for(var e,i=[],n=0;e=this.files[n];n++)e.name!=t&&i.push(e);this.files=i},uploadFiles:function(){var t=this;if(0==this.files.length)return!1;for(var e,i=0;e=this.files[i];i++)!function(e){var i=new XMLHttpRequest;if(i.upload){var n=new FormData;if(n.append(t.filename,e),void 0!=t.params)for(var o in t.params)n.append(o,t.params[o]);if(i.upload.addEventListener("progress",function(e){t.percent=Math.floor(e.loaded/e.total*100),console.log("uploadProgress",t.percent)},!1),i.onreadystatechange=function(e){if(4==i.readyState)if(200==i.status){var n=i.responseText;"{"==n.substr(0,1)&&(n=JSON.parse(n)),void 0!=n.result&&(t.file=n.result),void 0!=t.success&&t.success(n),0==t.files.length&&console.log("uploadDone")}else console.log("uploadError",data)},i.open("POST",t.server+t.api,!0),void 0!=t.header)for(var r in t.header)i.setRequestHeader(r,t.header[r]);i.withCredentials=!1,i.send(n)}}(e)},cropDragBegin:function(t){this.drag=!0,this.grabbing=!0,this.beginX=t.pageX-t.target.offsetLeft,this.beginY=t.pageY-t.target.offsetTop,this.isMobile?(2==t.touches.length&&(this.beginLength=0==this.beginLength?this.cropTouchData(t).length:this.beginLength),document.addEventListener("touchmove",this.cropDragMove,!1),document.addEventListener("touchend",this.cropDragEnd,!1)):(document.addEventListener("mouseover",this.cropDragMove,!1),document.addEventListener("mouseup",this.cropDragEnd,!1))},cropDragMove:function(t){return!!this.drag&&(this.isMobile&&2==t.touches.length?(this.scaleLength=this.cropTouchData(t).length,this.scale=Math.min(200,Math.max(100,this.scaleLength/this.beginLength*100)),this.cropZoom()):(this.scaleX=t.pageX-this.beginX,this.scaleY=t.pageY-this.beginY),void this.cropLimit())},cropDragEnd:function(t){this.drag=!1,this.grabbing=!1,this.cropToCanvas(),this.isMobile?(document.removeEventListener("touchmove",this.cropDragMove,!1),document.removeEventListener("touchend",this.cropDragEnd,!1)):(document.removeEventListener("mouseover",this.cropDragMove,!1),document.removeEventListener("mouseup",this.cropDragEnd,!1))},cropToCanvas:function(){this.context.clearRect(0,0,this.width,this.height);var t=Math.round(Math.abs(this.scaleX)*this.img.naturalWidth/this.scaleWidth),e=Math.round(Math.abs(this.scaleY)*this.img.naturalHeight/this.scaleHeight),i=this.width*this.img.naturalWidth/this.scaleWidth,n=this.height*this.img.naturalHeight/this.scaleHeight;this.context.drawImage(this.img,t,e,i,n,0,0,this.width,this.height/this.cropGetRatio())},cropZoom:function(){var t=this.scale/100,e=this.scaleX-this.width/2,i=this.scaleY-this.height/2,n=void 0;this.img.naturalWidth>this.img.naturalHeight?(n=this.scaleHeight/this.height,this.scaleHeight=this.height*t,this.scaleWidth=this.scaleHeight*this.img.naturalWidth/this.img.naturalHeight):(n=this.scaleWidth/this.width,this.scaleWidth=this.width*t,this.scaleHeight=this.scaleWidth*this.img.naturalHeight/this.img.naturalWidth),this.scaleX=e*t/n+this.width/2,this.scaleY=i*t/n+this.height/2,this.cropLimit(),this.cropToCanvas()},cropTouchData:function(t){if(!(t.touches.length<2)){var e=t.touches[0].pageX,i=t.touches[1].pageX,n=e<=i?(i-e)/2+e:(e-i)/2+i,o=t.touches[0].pageY-this.scrollbar.scrollTop,r=t.touches[1].pageY-this.scrollbar.scrollTop,s=o<=r?(r-o)/2+o:(o-r)/2+r;return{length:Math.round(Math.sqrt(Math.pow(e-i,2)+Math.pow(o-r,2))),x:Math.round(n),y:Math.round(s)}}},cropLimit:function(){this.scaleX<-(this.scaleWidth-this.width)&&(this.scaleX=-(this.scaleWidth-this.width)),this.scaleY<-(this.scaleHeight-this.height)&&(this.scaleY=-(this.scaleHeight-this.height)),this.scaleX>0&&(this.scaleX=0),this.scaleY>0&&(this.scaleY=0),this.scaleHeight===this.height&&(this.scaleY=0),this.scaleWidth===this.width&&(this.scaleX=0)},cropOK:function(){var t=this,e=this.canvas.toDataURL("image/jpeg",this.quality||.8);if(""==this.server||""==this.api)return this.file=e,this.showCrop=!1,document.body.removeChild(this.canvas),this.input.value="",!1;e=window.atob(e.split(",")[1]);for(var i=new ArrayBuffer(e.length),n=new Uint8Array(i),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);var r=new Blob([n],{type:"image/jpeg"}),s=new FormData;if(s.append(this.filename,r),void 0!=this.params)for(var a in this.params)s.append(a,this.params[a]);var c=new XMLHttpRequest;if(c.upload){if(c.upload.addEventListener("progress",function(e){t.percent=Math.floor(e.loaded/e.total*100),console.log("uploadProgress",t.percent)},!1),c.onreadystatechange=function(i){if(4==c.readyState)if(200==c.status){var n=c.responseText;"{"==n.substr(0,1)&&(n=JSON.parse(n)),void 0!=n.result&&(t.file=n.result),void 0!=t.success&&t.success(n),0==t.files.length&&console.log("uploadDone")}else console.log("uploadError",e)},c.open("POST",this.server+this.api,!0),void 0!=this.header)for(var u in this.header)c.setRequestHeader(u,this.header[u]);c.withCredentials=!1,c.send(s)}this.showCrop=!1,document.body.removeChild(this.canvas),this.input.value=""},cropCancel:function(){this.showCrop=!1,document.body.removeChild(this.canvas),this.input.value=""},cropGetRatio:function(){var t=(this.img.naturalWidth,this.img.naturalHeight),e=document.createElement("canvas");e.width=1,e.height=t;var i=e.getContext("2d");i.drawImage(this.img,0,0);for(var n=i.getImageData(0,0,1,t).data,o=0,r=t,s=t;s>o;){var a=n[4*(s-1)+3];0===a?r=s:o=s,s=r+o>>1}var c=s/t;return 0===c?1:c}}}},function(t,e,i){t.exports={"default":i(18),__esModule:!0}},function(t,e,i){"use strict";var n=i(16)["default"];e["default"]=function(t){return t&&t.constructor===n?"symbol":typeof t},e.__esModule=!0},function(t,e,i){i(35),i(34),t.exports=i(5).Symbol},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(29);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(19);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(1);t.exports=function(t){var e=n.getKeys(t),i=n.getSymbols;if(i)for(var o,r=i(t),s=n.isEnum,a=0;r.length>a;)s.call(t,o=r[a++])&&e.push(o);return e}},function(t,e,i){var n=i(2),o=i(5),r=i(21),s="prototype",a=function(t,e,i){var c,u,l,h=t&a.F,p=t&a.G,f=t&a.S,d=t&a.P,g=t&a.B,v=t&a.W,m=p?o:o[e]||(o[e]={}),y=p?n:f?n[e]:(n[e]||{})[s];p&&(i=e);for(c in i)u=!h&&y&&c in y,u&&c in m||(l=u?y[c]:i[c],m[c]=p&&"function"!=typeof y[c]?i[c]:g&&u?r(l,n):v&&y[c]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):d&&"function"==typeof l?r(Function.call,l):l,d&&((m[s]||(m[s]={}))[c]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e,i){var n=i(3),o=i(1).getNames,r={}.toString,s="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(e){return s.slice()}};t.exports.get=function(t){return s&&"[object Window]"==r.call(t)?a(t):o(n(t))}},function(t,e,i){var n=i(1),o=i(9);t.exports=i(6)?function(t,e,i){return n.setDesc(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(4);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(4);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(1),o=i(3);t.exports=function(t,e){for(var i,r=o(t),s=n.getKeys(r),a=s.length,c=0;a>c;)if(r[i=s[c++]]===e)return i}},function(t,e){t.exports=!0},function(t,e,i){t.exports=i(26)},function(t,e,i){var n=i(1).setDesc,o=i(8),r=i(12)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e){},function(t,e,i){"use strict";var n=i(1),o=i(2),r=i(8),s=i(6),a=i(24),c=i(32),u=i(7),l=i(10),h=i(33),p=i(11),f=i(12),d=i(30),g=i(25),v=i(23),m=i(28),y=i(20),b=i(3),w=i(9),x=n.getDesc,_=n.setDesc,S=n.create,M=g.get,D=o.Symbol,H=o.JSON,O=H&&H.stringify,E=!1,C=f("_hidden"),j=n.isEnum,W=l("symbol-registry"),P=l("symbols"),T="function"==typeof D,L=Object.prototype,X=s&&u(function(){return 7!=S(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=x(L,e);n&&delete L[e],_(t,e,i),n&&t!==L&&_(L,e,n)}:_,Y=function(t){var e=P[t]=S(D.prototype);return e._k=t,s&&E&&X(L,t,{configurable:!0,set:function(e){r(this,C)&&r(this[C],t)&&(this[C][t]=!1),X(this,t,w(1,e))}}),e},F=function(t){return"symbol"==typeof t},k=function(t,e,i){return i&&r(P,e)?(i.enumerable?(r(t,C)&&t[C][e]&&(t[C][e]=!1),i=S(i,{enumerable:w(0,!1)})):(r(t,C)||_(t,C,w(1,{})),t[C][e]=!0),X(t,e,i)):_(t,e,i)},N=function(t,e){y(t);for(var i,n=v(e=b(e)),o=0,r=n.length;r>o;)k(t,i=n[o++],e[i]);return t},q=function(t,e){return void 0===e?S(t):N(S(t),e)},B=function(t){var e=j.call(this,t);return!(e||!r(this,t)||!r(P,t)||r(this,C)&&this[C][t])||e},I=function(t,e){var i=x(t=b(t),e);return!i||!r(P,e)||r(t,C)&&t[C][e]||(i.enumerable=!0),i},R=function(t){for(var e,i=M(b(t)),n=[],o=0;i.length>o;)r(P,e=i[o++])||e==C||n.push(e);return n},A=function(t){for(var e,i=M(b(t)),n=[],o=0;i.length>o;)r(P,e=i[o++])&&n.push(P[e]);return n},J=function(t){if(void 0!==t&&!F(t)){for(var e,i,n=[t],o=1,r=arguments;r.length>o;)n.push(r[o++]);return e=n[1],"function"==typeof e&&(i=e),!i&&m(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!F(e))return e}),n[1]=e,O.apply(H,n)}},z=u(function(){var t=D();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))});T||(D=function(){if(F(this))throw TypeError("Symbol is not a constructor");return Y(p(arguments.length>0?arguments[0]:void 0))},c(D.prototype,"toString",function(){return this._k}),F=function(t){return t instanceof D},n.create=q,n.isEnum=B,n.getDesc=I,n.setDesc=k,n.setDescs=N,n.getNames=g.get=R,n.getSymbols=A,s&&!i(31)&&c(L,"propertyIsEnumerable",B,!0));var G={"for":function(t){return r(W,t+="")?W[t]:W[t]=D(t)},keyFor:function(t){return d(W,t)},useSetter:function(){E=!0},useSimple:function(){E=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=f(t);G[t]=T?e:Y(e)}),E=!0,a(a.G+a.W,{Symbol:D}),a(a.S,"Symbol",G),a(a.S+a.F*!T,"Object",{create:q,defineProperty:k,defineProperties:N,getOwnPropertyDescriptor:I,getOwnPropertyNames:R,getOwnPropertySymbols:A}),H&&a(a.S+a.F*(!T||z),"JSON",{stringify:J}),h(D,"Symbol"),h(Math,"Math",!0),h(o.JSON,"JSON",!0)},function(t,e){},function(t,e){},function(t,e,i){t.exports=i.p+"89ba85553816f79d03ae3982192ff8c1.svg"},function(t,e,i){t.exports=" <div class=layout> <div class=demo> <upload :server=upload.server :api=upload.api :params=upload.params :success=upload.success :file.sync=upload.file :crop=upload.crop :width=upload.width :height=upload.height :ok=upload.ok :cancel=upload.cancel> <img src="+i(38)+"> </upload> </div> <a class=github href=https://github.com/jinzhe/vue-upload target=_blank>GITHUB</a> </div> "},function(t,e){t.exports=' <div class=upload _v-6c7836ff=""> <slot _v-6c7836ff=""></slot> <div class=image :style="{\'background-image\':\'url(\'+server+file+\')\'}" v-if="file!=\'\'&amp;&amp;preview" _v-6c7836ff=""></div> <div class=progress v-if="percent>0" _v-6c7836ff=""> <span :style="{width:percent+\'%\'}" _v-6c7836ff=""></span> <em class=pa _v-6c7836ff="">{{percent}}%</em> </div> <input type=file class=upload @change=fileChange accept={{accepts}} multiple={{multiple}} _v-6c7836ff=""> <div class=crop v-if=showCrop transition=crop :style="{height:cropHeight+\'px\'}" _v-6c7836ff=""> <div class=loading v-if=!showCropDialog _v-6c7836ff=""> <div class="v-beat v-beat-odd" _v-6c7836ff=""></div> <div class="v-beat v-beat-even" _v-6c7836ff=""></div> <div class="v-beat v-beat-odd" _v-6c7836ff=""></div> </div> <div class=dialog :style="{width:width+\'px\',top:cropTop+\'px\'}" v-if=showCropDialog _v-6c7836ff=""> <section :style="{width:width+\'px\',height:height+\'px\'}" :class="{\'grab\':grabbing==false,\'grabbing\':grabbing}" _v-6c7836ff=""> <img :style="{width:scaleWidth+\'px\',height:scaleHeight+\'px\',left:scaleX+\'px\',top:scaleY+\'px\'}" @mousedown.prevent=cropDragBegin @mousemove.prevent=cropDragMove @mouseup.prevent=cropDragEnd @touchstart.prevent=cropDragBegin @touchmove.prevent=cropDragMove @touchend.prevent=cropDragEnd :src=cropImage _v-6c7836ff=""> </section> <footer _v-6c7836ff=""> <button @click=cropCancel _v-6c7836ff="">{{cancel}}</button> <button @click=cropOK _v-6c7836ff="">{{ok}}</button> </footer> <input type=range v-model=scale value=100 min=100 max=200 step=1 @input=cropZoom _v-6c7836ff=""> </div> </div> </div> '},function(t,e,i){var n,o;i(36),n=i(14),o=i(39),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,i){var n,o;i(37),n=i(15),o=i(40),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)}]);